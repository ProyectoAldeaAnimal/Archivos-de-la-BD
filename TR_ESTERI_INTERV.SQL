CREATE TRIGGER `TR_ESTERI_INTERV` AFTER INSERT ON `inter`
FOR EACH ROW BEGIN 
DECLARE X INT;
DECLARE Y INT;
DECLARE Z INT;
DECLARE TIPO INT;

SET X = (SELECT ID_INT FROM inter WHERE ID_INT IN (SELECT MAX(ID_INT) FROM inter));
SET Z = (SELECT ID_ORDEN_INT FROM inter WHERE ID_INT = X);
SET TIPO = (SELECT ID_TIPO_INT FROM orden_int WHERE ID_ORDEN_INT = Z);

IF(TIPO=1 or TIPO=2)
THEN

SET Y =(SELECT mas.ID_MAS FROM orden_int, inter,mas, atencion WHERE inter.ID_ORDEN_INT =Z  and orden_int.ID_ATENCION = atencion.ID_ATENCION and atencion.ID_MAS = mas.ID_MAS);

UPDATE ficha SET ESTERILIZACION =1 WHERE ficha.ID_MAS = Y; 

END IF;

END